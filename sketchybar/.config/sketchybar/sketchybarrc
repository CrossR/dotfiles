# Bar config
sketchybar -m --bar height=25        \
                    blur_radius=50   \
                    position=top     \
                    padding_left=10  \
                    padding_right=10 \
                    color=0xF0202020

# Global defaults
sketchybar -m --default updates=when_shown                    \
                        drawing=on                            \
                        cache_scripts=on                      \
                        icon.font="Hack Nerd Font:Bold:14.0"  \
                        icon.color=0xF0A8A8A8                 \
                        icon.highlight_color=0xFFFE8019       \
                        label.font="SF Pro:Semibold:14"       \
                        label.color=0xF0A8A8A8                \
                        label.highlight_color=0xFFFE8019

# Space Defaults
sketchybar -m --default label.padding_left=2  \
                        label.padding_right=2 \
                        icon.padding_left=8   \
                        label.padding_right=8

# Custom events - triggered by Yabai (in yabairc)
sketchybar -m --add event window_focus \
              --add event title_changed \
              --add event window_created \
              --add event window_destroyed \
              --add event mission_control_exit

# 10 default spaces
SPACE_IDS=("1" "2" "3" "4" "5" "6" "7" "8" "9" "10")

for i in "${!SPACE_IDS[@]}"; do
    sid=$(($i+1))
    sketchybar -m --add space space.$sid left                                \
                  --set space.$sid associated_space=$sid                     \
                                   icon=${SPACE_IDS[$i]}                     \
                                   icon.font='SF Pro:Semibold:14.0'          \
                                   click_script="yabai -m space --focus $sid"
done

# Add a ° symbol to any space with active windows on it
sketchybar -m                                                                                 \
  --add item dummy_windows left                                                               \
  --set dummy_windows script="~/.config/sketchybar/plugins/space_in_use.sh"                   \
  --subscribe dummy_windows space_change window_created window_destroyed mission_control_exit \
                                                                                              \
  --add item dummy_active left                                                                \
  --set dummy_active script="~/.config/sketchybar/plugins/space_active.sh"                    \
  --subscribe dummy_active space_change mission_control_exit

# Item defaults
sketchybar -m --default label.padding_left=2  \
                        icon.padding_right=2  \
                        icon.padding_left=6   \
                        label.padding_right=6

# Right hand side items
sketchybar -m --add item time right                                                 \
              --set time update_freq=2                                              \
                         icon.padding_right=0                                       \
                         label.padding_left=0                                       \
                         script="~/.config/sketchybar/plugins/time.sh"              \
                                                                                    \
              --add item date right                                                 \
              --set date update_freq=60                                             \
                         icon.padding_right=0                                       \
                         label.padding_left=0                                       \
                         script="~/.config/sketchybar/plugins/date.sh"              \
                                                                                    \
              --add item battery right                                              \
              --set battery update_freq=3                                           \
                            script="~/.config/sketchybar/plugins/battery.sh"        \
                            label.font='SF Pro:Semibold:14.0'                       \
                            label.padding_left=5                                    \
                            icon.font="Hack Nerd Font:Bold:14.0"                    \
                            icon=                                                  \
                                                                                    \
              --add event bluetooth_change "com.apple.bluetooth.status"             \
                                                                                    \
              --add item headphones right                                           \
              --set headphones icon=                                               \
                               script="~/.config/sketchybar/plugins/headphones.sh"  \
              --subscribe headphones bluetooth_change                               \
                                                                                    \
              --add item apps right                                                 \
              --set apps icon.font="Hack Nerd Font:Bold:14.0"                       \
                            icon.drawing=off                                        \
                            icon=""                                                 \
                            script="~/.config/sketchybar/plugins/app_icons.sh"      \
              --subscribe apps front_app_switched

# Central items
sketchybar -m --add item title center                                        \
              --set title script="$HOME/.config/sketchybar/plugins/title.sh" \
              --subscribe title title_changed window_focus front_app_switched space_change window_created window_destroyed mission_control_exit

############## FINALIZING THE SETUP ##############
sketchybar -m --update

echo "sketchybar configuration loaded.."
